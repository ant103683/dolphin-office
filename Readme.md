# Dolphin - è”æœºå¯¹æˆ˜åŠŸèƒ½ä¼˜åŒ–

  è¯·ç›´æŽ¥ä½¿ç”¨dev-2509åˆ†æ”¯;
  è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºè”æœºç›¸å…³åŠŸèƒ½æ·»åŠ åŠŸèƒ½çš„ç‰ˆæœ¬, ç›®å‰å·²ç»æ”¯æŒ:

é€šç”¨åŠŸèƒ½:
  1. è‡ªå®šä¹‰é”®ä½label:ä½ å¯ä»¥ä¸ºä½ çš„æ¸¸æˆæ·»åŠ æ¯ä¸ªæŒ‰é”®å¯¹åº”çš„åŠŸèƒ½çš„æ¨¡æ¿;
  2. è‡ªåŠ¨æ·»åŠ é•œåƒè·¯å¾„:çŽ°åœ¨, æ¨¡æ‹Ÿå™¨ä¼šè‡ªåŠ¨æ·»åŠ åŒç­‰çº§çš„iso_filesä½œä¸ºé»˜è®¤è·¯å¾„, è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿æ–°æ‰‹çš„ç¬¬ä¸€æ¬¡ä½¿ç”¨;
  3. åœ¨ä¸­å›½, wiié¥æŽ§å™¨å‡ ä¹Žæœªè¢«ä½¿ç”¨, æ‰€ä»¥çŽ°åœ¨ç‚¹å‡»ä¸»ç•Œé¢çš„æŽ§åˆ¶å™¨æŒ‰é’®, ä¼šç›´æŽ¥å¼¹å‡º1P ~ 4Pç»™çŽ©å®¶é€‰æ‹©, å¹¶è·³è½¬åˆ°"æ ‡å‡†æŽ§åˆ¶å™¨"è®¾ç½®ç•Œé¢, è¿™æ˜¯ç›®å‰ä¸ºæ­¢æˆ‘äº†è§£åˆ°çš„æœ€å¸¸è§çš„é”®ä½è®¾ç½®ç•Œé¢;
  4. çŽ°åœ¨, å­˜æ¡£ä¼šæ ¹æ®é•œåƒæ–‡ä»¶çš„IDå’Œå“ˆå¸Œå€¼å…±åŒå†³å®š, è€Œä¸æ˜¯å•çº¯çš„ID, è¿™æ ·, ä¸åŒModç‰ˆæœ¬çš„åŒä¸ªIDæ¸¸æˆä¹Ÿå¯ä»¥ç‹¬äº«è‡ªå·±çš„å­˜æ¡£è¿›åº¦;
  5. ä¸»ç•Œé¢æ·»åŠ è”æœºå¿«æ·è¾“å…¥æ¡†, ä»¥åŠè”æœºå¤§åŽ…(Netplay Hall)
   
è”æœºç›¸å…³:
1. çŽ°åœ¨è¢«åˆ†ä¸ºä¸¤ä¸ªç‰ˆæœ¬, çº¯æœåŠ¡å™¨ç‰ˆæœ¬å’Œå®¢æˆ·ç«¯ç‰ˆæœ¬
2. æœåŠ¡å™¨ç‰ˆæœ¬:
   1. æœåŠ¡å™¨ç‰ˆæœ¬ä½œä¸ºä¸»æœºä½¿ç”¨çš„æ—¶å€™, ä¸å†è¿›å…¥æ¸¸æˆ, è€Œä»…ä»…ä½œä¸ºæ•°æ®ä¼ è¾“çš„æ¡¥æ¢; åœ¨ä¸€å°ä½Žé…ç½®çš„äº‘æœåŠ¡å™¨ä¸Šé¢(ä¾‹å¦‚2H2G), ä¹Ÿå¯ä»¥å¼€å‡ ä¸ªæˆ¿é—´, åªéœ€è¦è®¾ç½®ç«¯å£ä¸åŒå³å¯;
   2. ç”±äºŽä¸å†éœ€è¦è¿›å…¥æ¸¸æˆ, çŽ°åœ¨æœåŠ¡å™¨ç‰ˆæœ¬ä¸å†éœ€è¦æ¸¸æˆé•œåƒæ–‡ä»¶;
   3. çŽ°åœ¨æœåŠ¡å™¨ç‰ˆæœ¬æ”¯æŒä»»æ„Wiiæ¸¸æˆ(æš‚æ—¶æœªæµ‹è¯•å…¶ä»–æ¸¸æˆ), å®¢æˆ·ç«¯ä¿®æ”¹æ¸¸æˆçš„æ—¶å€™ä¼šæŠŠç›¸å…³æ¸¸æˆä¿¡æ¯ä¸Šä¼ ç»™æœåŠ¡å™¨;
   4. ç”±äºŽæœåŠ¡å™¨ç‰ˆæœ¬çš„ä¸»æœºå·²ç»ä¸å†è¿›å…¥æ¸¸æˆ, æ‰€ä»¥å­˜æ¡£ä¸Šä¼ éœ€è¦å€ŸåŠ©å®¢æˆ·ç«¯, çŽ°åœ¨å®¢æˆ·ç«¯å¦‚æžœæƒ³è¦ä¿å­˜æœ¬æ¬¡æ¸¸çŽ©çš„è¿›åº¦, éœ€è¦ç‚¹å‡»è”æœºçª—å£çš„"ä¸Šä¼ æ–‡æ¡£"æŒ‰é’®;
   5. ä¸ºäº†é˜²æ­¢éƒ¨åˆ†å®¢æˆ·ç«¯åœ¨æœåŠ¡å™¨å†…é—²ç½®, çŽ°åœ¨ä¸è¿›å…¥æ¸¸æˆå¹¶ä¸”è¶…è¿‡15åˆ†æ”¯çš„å®¢æˆ·ç«¯ä¼šè¢«è¸¢å‡ºæˆ¿é—´
3. å®¢æˆ·ç«¯ç‰ˆæœ¬:
   1. çŽ°åœ¨å®¢æˆ·ç«¯ç‰ˆæœ¬è¿žæŽ¥è¿›å…¥æˆ¿é—´åŽ, æ‹¥æœ‰"å¼€å§‹æ¸¸æˆ"ã€"è°ƒèŠ‚ç¼“å†²"ã€"æ›´æ¢æ¸¸æˆ"ã€"æ›´æ¢çŽ©å®¶æ˜ å°„"æƒé™, å…·å¤‡ä¸Šä¼ å­˜æ¡£åŠŸèƒ½;
4. è”æœºæ–°åŠŸèƒ½:
   1. æ¸¸æˆä¸­é€”å¯ä»¥ç›´æŽ¥æ›´æ¢çŽ©å®¶æ˜ å°„, ä¾‹å¦‚1På’Œ2Päº’æ¢, æˆ–è€…æŠŠä¸€ä¸ªåªèƒ½è§‚æˆ˜çš„æ˜ å°„ä¸ºnoneçš„çŽ©å®¶è°ƒä¸º1Pæˆ–è€…2Pç­‰, æ€»ä¹‹, å¦‚æžœå¤šä¸ªæœ‹å‹ä¸€èµ·çŽ©å¯¹æˆ˜æ¸¸æˆ(ä¾‹å¦‚BT3), ä¸å†éœ€è¦å…³é—­æ¸¸æˆå¹¶é‡æ–°æ‰“å¼€æ¥æ›´æ¢æ˜ å°„;
   2. æ¸¸æˆå¯ä»¥ä»ŽæŸä¸ªå³æ—¶å­˜æ¡£çŠ¶æ€ç›´æŽ¥å¼€å§‹, åªè¦æ‰€æœ‰çš„å®¢æˆ·ç«¯åœ¨Dolphin Emulation/StateSaves/initial/è·¯å¾„ä¸Šæ”¾ç½®åŒä¸ªå³æ—¶å­˜æ¡£æ–‡ä»¶, å¹¶æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼å‘½å, æ¸¸æˆå¼€å§‹åŽæ‰€æœ‰äººéƒ½ä¼šä»Žè¿™ä¸ªå³æ—¶å­˜æ¡£çŠ¶æ€å¼€å§‹æ¸¸æˆ, ä¸å†éœ€è¦ç­‰å¾…æ¼«é•¿çš„å¼€å§‹åŠ¨ç”», ä¾‹å¦‚åŽŸç‰ˆçš„æ—¥ç‰ˆBT3é•œåƒ: RDSJAF_531c9777.sav, å…¶ä¸­RDSJAFæ˜¯æ¸¸æˆID, 531c9777åˆ™æ˜¯æ–‡ä»¶å“ˆå¸Œå€¼çš„å‰å…«ä½, å…³äºŽè¿™ç‚¹åŽç»­ä¼šè¡¥å……æŒ‰é’®, è®©ç”¨æˆ·ç›´æŽ¥ä¿å­˜åˆ°ç›®æ ‡æ–‡ä»¶å¤¹, æ— é¡»è‡ªå·±æ‰‹åŠ¨æ“ä½œ;
   3. çŽ°åœ¨, æ¸¸æˆä¸­é€”ä¹Ÿå¯ä»¥åŠ å…¥æ–°çš„çŽ©å®¶! çŽ©å®¶åªéœ€è¦åœ¨è”æœºçª—å£ç‚¹å‡»"ç­‰å¾…åŠ å…¥", æ–°çŽ©å®¶å³å¯è¿žæŽ¥è¿›å…¥æˆ¿é—´; è¿™ä¸ªæ—¶å€™æ‰€æœ‰äººçš„æ¸¸æˆä¼šè¢«æš‚åœ, å¹¶ä¸”æ–°çŽ©å®¶ä¼šæŽ¥æ”¶æœåŠ¡å™¨å‘é€çš„å³æ—¶å­˜æ¡£, é€Ÿåº¦å–å†³äºŽæœåŠ¡å™¨å¸¦å®½

æ€»ç»“:
   å¼€å‘åˆè¡·æ˜¯è®©æ–°çŽ©å®¶å¯ä»¥æ›´åŠ ç®€å•çš„ä¸Šæ‰‹æ¨¡æ‹Ÿå™¨, ä»¥åŠè”æœºåŠŸèƒ½; ç›®å‰ä¾æ—§æ­£åœ¨å¼€å‘ä¸­, å¹¶ä¸”ç”±äºŽæˆ‘æ˜¯ç‹¬è‡ªå¼€å‘, è®¸å¤šæ–°åŠŸèƒ½æ²¡æœ‰ç»è¿‡ä¸¥æ ¼çš„æµ‹è¯•, è€Œä¸”å¾ˆå¤šåœ°æ–¹çš„å®žçŽ°åº”è¯¥é‡‡ç”¨æ›´å¥½çš„æ–¹æ³•, ç›®å‰å¤§éƒ¨åˆ†ä»£ç æ˜¯é€šè¿‡Traeå®žçŽ°çš„.

# Dolphin - NetPlay Optimization

This is a specialized fork of the Dolphin Emulator, specifically enhanced for an improved **NetPlay** (online multiplayer) experience.

---

## ðŸš€ General Features

* **Custom Key Labels**: Create templates to label specific button functions for each game.
* **Automatic Image Path**: The emulator automatically sets the `iso_files` directory as the default path for easier initial setup.
* **Streamlined Controller Setup**: Clicking the "Controllers" button now directly opens the **Standard Controller** settings for Players 1-4, skipping unnecessary Wii Remote menus.
* **Hash-Based Save Management**: Save files are now identified by both **Game ID** and **Hash Value**. This allows different Mod versions of the same game to have independent save data.
* **UI Enhancements**: Added a quick-input box for NetPlay and a dedicated **NetPlay Lobby** to the main interface.

---

## ðŸŒ NetPlay Enhancements

The project is now divided into two versions: **Server** (Headless) and **Client**.

### 1. Server Version (Host)
* **Bridge Mode**: When hosting, the server acts solely as a data bridge and does not render the game. This allows low-spec cloud servers (e.g., **2C2G**) to host multiple rooms on different ports.
* **No ISO Required**: The server version does not require game image files to run.
* **Universal Wii Support**: (Beta) Supports various Wii games; clients will sync game information to the server automatically.
* **Client-Assisted Saves**: Since the host doesn't run the game, players can use the **"Upload Save"** button in the NetPlay window to sync progress back to the server.
* **Anti-Idle System**: To optimize server resources, idle clients (not in-game) will be kicked after **15 minutes**.

### 2. Client Version
* **Enhanced Permissions**: Connected clients can now **Start Game**, **Adjust Buffer**, **Change Game**, and **Remap Players**.

---

## ðŸ†• Advanced Functions

* **Mid-Game Remapping**: Swap player slots (e.g., 1P and 2P) or change an observer to a player **during the session** without restarting.
* **Instant Start (Savestate Sync)**: Skip intro animations by booting directly from a savestate. 
    * Place identical files in `Dolphin Emulation/StateSaves/initial/`.
    * Format: `GameID_Hash.sav` (e.g., `RDSJAF_531c9777.sav`).
* **Late-Join Support**: New players can join mid-session! The game will pause while the new player receives the current **Savestate** from the server. (Transmission speed depends on server bandwidth).

---

## ðŸ“ Note from Developer

This project aims to lower the barrier for new players to enjoy Dolphin's NetPlay. It is currently a **Work In Progress (WIP)** and developed solely by me. Many features are still in testing. 

> **Implementation Note**: Significant portions of the code logic were implemented with the assistance of **Trae** (AI). I am actively working on optimizing the codebase for better performance and stability.

# Dolphin - A GameCube and Wii Emulator

[Homepage](https://dolphin-emu.org/) | [Project Site](https://github.com/dolphin-emu/dolphin) | [Buildbot](https://dolphin.ci/) | [Forums](https://forums.dolphin-emu.org/) | [Wiki](https://wiki.dolphin-emu.org/) | [GitHub Wiki](https://github.com/dolphin-emu/dolphin/wiki) | [Issue Tracker](https://bugs.dolphin-emu.org/projects/emulator/issues) | [Coding Style](https://github.com/dolphin-emu/dolphin/blob/master/Contributing.md) | [Transifex Page](https://app.transifex.com/dolphinemu/dolphin-emu/dashboard/) | [Analytics](https://mon.dolphin-emu.org/)

Dolphin is an emulator for running GameCube and Wii games on Windows,
Linux, macOS, and recent Android devices. It's licensed under the terms
of the GNU General Public License, version 2 or later (GPLv2+).

Please read the [FAQ](https://dolphin-emu.org/docs/faq/) before using Dolphin.

## System Requirements

### Desktop

* OS
    * Windows (10 1903 or higher).
    * Linux.
    * macOS (11.0 Big Sur or higher).
    * Unix-like systems other than Linux are not officially supported but might work.
* Processor
    * A CPU with SSE2 support.
    * A modern CPU (3 GHz and Dual Core, not older than 2008) is highly recommended.
* Graphics
    * A reasonably modern graphics card (Direct3D 11.1 / OpenGL 3.3).
    * A graphics card that supports Direct3D 11.1 / OpenGL 4.4 is recommended.

### Android

* OS
    * Android (5.0 Lollipop or higher).
* Processor
    * A processor with support for 64-bit applications (either ARMv8 or x86-64).
* Graphics
    * A graphics processor that supports OpenGL ES 3.0 or higher. Performance varies heavily with [driver quality](https://dolphin-emu.org/blog/2013/09/26/dolphin-emulator-and-opengl-drivers-hall-fameshame/).
    * A graphics processor that supports standard desktop OpenGL features is recommended for best performance.

Dolphin can only be installed on devices that satisfy the above requirements. Attempting to install on an unsupported device will fail and display an error message.

## Building for Windows

Use the solution file `Source/dolphin-emu.sln` to build Dolphin on Windows.
Dolphin targets the latest MSVC shipped with Visual Studio or Build Tools.
Other compilers might be able to build Dolphin on Windows but have not been
tested and are not recommended to be used. Git and latest Windows SDK must be
installed when building.

Make sure to pull submodules before building:
```sh
git submodule update --init --recursive
```

The "Release" solution configuration includes performance optimizations for the best user experience but complicates debugging Dolphin.
The "Debug" solution configuration is significantly slower, more verbose and less permissive but makes debugging Dolphin easier.

## Building for Linux and macOS

Dolphin requires [CMake](https://cmake.org/) for systems other than Windows. 
You need a recent version of GCC or Clang with decent c++20 support. CMake will
inform you if your compiler is too old.
Many libraries are bundled with Dolphin and used if they're not installed on 
your system. CMake will inform you if a bundled library is used or if you need
to install any missing packages yourself. You may refer to the [wiki](https://github.com/dolphin-emu/dolphin/wiki/Building-for-Linux) for more information.

Make sure to pull submodules before building:
```sh
git submodule update --init --recursive
```

### macOS Build Steps:

A binary supporting a single architecture can be built using the following steps: 

1. `mkdir build`
2. `cd build`
3. `cmake ..`
4. `make -j $(sysctl -n hw.logicalcpu)`

An application bundle will be created in `./Binaries`.

A script is also provided to build universal binaries supporting both x64 and ARM in the same
application bundle using the following steps:

1. `mkdir build`
2. `cd build`
3. `python ../BuildMacOSUniversalBinary.py`
4. Universal binaries will be available in the `universal` folder

Doing this is more complex as it requires installation of library dependencies for both x64 and ARM (or universal library
equivalents) and may require specifying additional arguments to point to relevant library locations. 
Execute BuildMacOSUniversalBinary.py --help for more details.  

### Linux Global Build Steps:

To install to your system.

1. `mkdir build`
2. `cd build`
3. `cmake ..`
4. `make -j $(nproc)`
5. `sudo make install`

### Linux Local Build Steps:

Useful for development as root access is not required.

1. `mkdir Build`
2. `cd Build`
3. `cmake .. -DLINUX_LOCAL_DEV=true`
4. `make -j $(nproc)`
5. `ln -s ../../Data/Sys Binaries/`

### Linux Portable Build Steps:

Can be stored on external storage and used on different Linux systems.
Or useful for having multiple distinct Dolphin setups for testing/development/TAS.

1. `mkdir Build`
2. `cd Build`
3. `cmake .. -DLINUX_LOCAL_DEV=true`
4. `make -j $(nproc)`
5. `cp -r ../Data/Sys/ Binaries/`
6. `touch Binaries/portable.txt`

## Building for Android

These instructions assume familiarity with Android development. If you do not have an
Android dev environment set up, see [AndroidSetup.md](AndroidSetup.md).

Make sure to pull submodules before building:
```sh
git submodule update --init --recursive
```

If using Android Studio, import the Gradle project located in `./Source/Android`.

Android apps are compiled using a build system called Gradle. Dolphin's native component,
however, is compiled using CMake. The Gradle script will attempt to run a CMake build
automatically while building the Java code.

## Uninstalling

On Windows, simply remove the extracted directory, unless it was installed with the NSIS installer,
in which case you can uninstall Dolphin like any other Windows application.

Linux users can run `cat install_manifest.txt | xargs -d '\n' rm` as root from the build directory
to uninstall Dolphin from their system.

macOS users can simply delete Dolphin.app to uninstall it.

Additionally, you'll want to remove the global user directory if you don't plan on reinstalling Dolphin.

## Command Line Usage

```
Usage: Dolphin.exe [options]... [FILE]...

Options:
  --version             show program's version number and exit
  -h, --help            show this help message and exit
  -u USER, --user=USER  User folder path
  -m MOVIE, --movie=MOVIE
                        Play a movie file
  -e <file>, --exec=<file>
                        Load the specified file
  -n <16-character ASCII title ID>, --nand_title=<16-character ASCII title ID>
                        Launch a NAND title
  -C <System>.<Section>.<Key>=<Value>, --config=<System>.<Section>.<Key>=<Value>
                        Set a configuration option
  -s <file>, --save_state=<file>
                        Load the initial save state
  -d, --debugger        Show the debugger pane and additional View menu options
  -l, --logger          Open the logger
  -b, --batch           Run Dolphin without the user interface (Requires
                        --exec or --nand-title)
  -c, --confirm         Set Confirm on Stop
  -v VIDEO_BACKEND, --video_backend=VIDEO_BACKEND
                        Specify a video backend
  -a AUDIO_EMULATION, --audio_emulation=AUDIO_EMULATION
                        Choose audio emulation from [HLE|LLE]
```

Available DSP emulation engines are HLE (High Level Emulation) and
LLE (Low Level Emulation). HLE is faster but less accurate whereas
LLE is slower but close to perfect. Note that LLE has two submodes (Interpreter and Recompiler)
but they cannot be selected from the command line.

Available video backends are "D3D" and "D3D12" (they are only available on Windows), "OGL", and "Vulkan".
There's also "Null", which will not render anything, and
"Software Renderer", which uses the CPU for rendering and
is intended for debugging purposes only.

## DolphinTool Usage
```
usage: dolphin-tool COMMAND -h

commands supported: [convert, verify, header, extract]
```

```
Usage: convert [options]... [FILE]...

Options:
  -h, --help            show this help message and exit
  -u USER, --user=USER  User folder path, required for temporary processing
                        files.Will be automatically created if this option is
                        not set.
  -i FILE, --input=FILE
                        Path to disc image FILE.
  -o FILE, --output=FILE
                        Path to the destination FILE.
  -f FORMAT, --format=FORMAT
                        Container format to use. Default is RVZ. [iso|gcz|wia|rvz]
  -s, --scrub           Scrub junk data as part of conversion.
  -b BLOCK_SIZE, --block_size=BLOCK_SIZE
                        Block size for GCZ/WIA/RVZ formats, as an integer.
                        Suggested value for RVZ: 131072 (128 KiB)
  -c COMPRESSION, --compression=COMPRESSION
                        Compression method to use when converting to WIA/RVZ.
                        Suggested value for RVZ: zstd [none|zstd|bzip|lzma|lzma2]
  -l COMPRESSION_LEVEL, --compression_level=COMPRESSION_LEVEL
                        Level of compression for the selected method. Ignored
                        if 'none'. Suggested value for zstd: 5
```

```
Usage: verify [options]...

Options:
  -h, --help            show this help message and exit
  -u USER, --user=USER  User folder path, required for temporary processing
                        files.Will be automatically created if this option is
                        not set.
  -i FILE, --input=FILE
                        Path to disc image FILE.
  -a ALGORITHM, --algorithm=ALGORITHM
                        Optional. Compute and print the digest using the
                        selected algorithm, then exit. [crc32|md5|sha1|rchash]
```

```
Usage: header [options]...

Options:
  -h, --help            show this help message and exit
  -i FILE, --input=FILE
                        Path to disc image FILE.
  -b, --block_size      Optional. Print the block size of GCZ/WIA/RVZ formats,
then exit.
  -c, --compression     Optional. Print the compression method of GCZ/WIA/RVZ
                        formats, then exit.
  -l, --compression_level
                        Optional. Print the level of compression for WIA/RVZ
                        formats, then exit.
```

```
Usage: extract [options]...

Options:
  -h, --help            show this help message and exit
  -i FILE, --input=FILE
                        Path to disc image FILE.
  -o FOLDER, --output=FOLDER
                        Path to the destination FOLDER.
  -p PARTITION, --partition=PARTITION
                        Which specific partition you want to extract.
  -s SINGLE, --single=SINGLE
                        Which specific file/directory you want to extract.
  -l, --list            List all files in volume/partition. Will print the
                        directory/file specified with --single if defined.
  -q, --quiet           Mute all messages except for errors.
  -g, --gameonly        Only extracts the DATA partition.
```
